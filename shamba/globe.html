<!DOCTYPE html>
<html>
  <head>
    <title>Map Dashboard</title>
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: Arial, sans-serif;
      }

      .container {
        display: flex;
        height: 100vh;
        width: 100%;
      }

      .sidebar {
        width: 300px;
        background-color: #1e1e2f;
        color: white;
        padding: 20px;
        box-sizing: border-box;
      }

      .sidebar h2 {
        margin-top: 0;
        font-size: 24px;
        border-bottom: 1px solid #444;
        padding-bottom: 10px;
      }

      .sidebar button {
        width: 100%;
        padding: 10px;
        margin-top: 10px;
        background-color: rgb(7, 79, 17);
        border: none;
        color: white;
        cursor: pointer;
        font-size: 16px;
        border-radius: 5px;
      }

      .sidebar button:hover {
        background-color: #4e4d4f;
      }

      #map {
        flex: 1;
        height: 100%;
      }
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        padding-top: 100px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
      }

      .modal-content {
        background-color: #fff;
        margin: auto;
        padding: 20px;
        border-radius: 8px;
        width: 90%;
        max-width: 400px;
      }

      .close {
        float: right;
        font-size: 24px;
        cursor: pointer;
        color: #aaa;
      }
      #loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgb(8, 8, 8);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        transition: opacity 0.6s ease;
      }

      .loader-logo {
        width: 1000px;
        animation: pulse 1.3s infinite ease-in-out;
      }

      #loader p {
        font-size: 16px;
        color: #333;
        margin-top: 15px;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
          opacity: 0.9;
        }
        50% {
          transform: scale(1.1);
          opacity: 1;
        }
      }

      .hidden {
        display: none !important;
      }
   /* Common modal overlay */
.modal {
  display: none; 
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  backdrop-filter: blur(8px);
  background-color: rgba(0, 0, 0, 0.4);
}

/* Centered modal content with glass effect */
.modal-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  padding: 30px;
  border-radius: 15px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(15px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25);
  color: #fff;
  width: 350px;
  font-family: 'Segoe UI', sans-serif;
  text-align: left;
}

/* Input styles */
.modal-content input {
  width: 100%;
  padding: 10px;
  margin: 10px 0 20px;
  border: none;
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.2);
  color: #fff;
}

/* Button group */
.modal-buttons {
  display: flex;
  justify-content: space-between;
}

/* Button styles */
.modal-content button {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  background: #043e13;
  color: white;
  cursor: pointer;
  font-weight: bold;
  transition: background 0.3s;
}

.modal-content button:hover {
  background: #007a52;
}


    </style>
  </head>
  <body>
    <!-- Loader -->
    <div id="loader">
      <img
        src="Screenshot 2025-07-27 210037.png"
        alt="Loading Logo"
        class="loader-logo"
      />
      <br />
      <br />
      <br />
      <br />
      <br />
      <br />
      <p>...................loading.....................</p>
    </div>

    <div class="container">
      <div class="sidebar">
        <h3>Welcome To:</h3>
        <img
          src="Screenshot 2025-07-27 210037.png"
          alt="Track Lands Logo"
          style="width: 250px; margin-bottom: 10px"
        />

        <h3>Go To:</h3>
        <select id="countyDropdown" onchange="goToCounty()">
          <option value="">-- Select County --</option>
          <option value="baringo">Baringo</option>
          <option value="bomet">Bomet</option>
          <option value="bungoma">Bungoma</option>
          <option value="busia">Busia</option>
          <option value="elgeyo marakwet">Elgeyo Marakwet</option>
          <option value="embu">Embu</option>
          <option value="garissa">Garissa</option>
          <option value="homa bay">Homa Bay</option>
          <option value="isiolo">Isiolo</option>
          <option value="kajiado">Kajiado</option>
          <option value="kakamega">Kakamega</option>
          <option value="kericho">Kericho</option>
          <option value="kiambu">Kiambu</option>
          <option value="kilifi">Kilifi</option>
          <option value="kirinyaga">Kirinyaga</option>
          <option value="kisii">Kisii</option>
          <option value="kisumu">Kisumu</option>
          <option value="kitui">Kitui</option>
          <option value="kwale">Kwale</option>
          <option value="laikipia">Laikipia</option>
          <option value="lamu">Lamu</option>
          <option value="machakos">Machakos</option>
          <option value="makueni">Makueni</option>
          <option value="mandera">Mandera</option>
          <option value="marsabit">Marsabit</option>
          <option value="meru">Meru</option>
          <option value="migori">Migori</option>
          <option value="mombasa">Mombasa</option>
          <option value="muranga">Murang'a</option>
          <option value="nairobi">Nairobi</option>
          <option value="nakuru">Nakuru</option>
          <option value="nandi">Nandi</option>
          <option value="narok">Narok</option>
          <option value="nyamira">Nyamira</option>
          <option value="nyandarua">Nyandarua</option>
          <option value="nyeri">Nyeri</option>
          <option value="samburu">Samburu</option>
          <option value="siaya">Siaya</option>
          <option value="taita taveta">Taita Taveta</option>
          <option value="tana river">Tana River</option>
          <option value="tharaka nithi">Tharaka Nithi</option>
          <option value="trans nzoia">Trans Nzoia</option>
          <option value="turkana">Turkana</option>
          <option value="uasin gishu">Uasin Gishu</option>
          <option value="vihiga">Vihiga</option>
          <option value="wajir">Wajir</option>
          <option value="west pokot">West Pokot</option>
        </select>
        <input
          type="text"
          id="parcelInput"
          placeholder="Enter Parcel ID"
          style="width: 100%; padding: 8px; margin-top: 10px"
        />

        <button onclick="searchParcel()" style="width: 100%; margin-top: 5px">
          Search Parcel
        </button>

        <button onclick="openBuyModal()">Buy Land</button>
        <!-- Buy Land Modal -->
<div id="buyModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('buyModal')">&times;</span>
    <h2>Buy Land</h2>
    <form id="buyForm">
      <label for="buyParcel">Parcel ID</label>
      <input id="buyParcel" type="text" placeholder="e.g., KE-P1234" required>

      <label for="buyValue">Offer Price (KES)</label>
      <input id="buyValue" type="number" placeholder="e.g., 450000" required>

      <label for="buyPhone">Phone Number</label>
      <input id="buyPhone" type="tel" placeholder="e.g., 0712345678" required pattern="^07\d{8}$" title="Enter a valid Kenyan phone number (e.g., 0712345678)">

      <button type="submit">Submit Offer</button>
      <button type="button" onclick="closeBuyModal()">Cancel</button>
    </form>
  </div>
</div>
        <!-- Sell Land Button -->
        <button onclick="openSellModal()">Sell Land</button>

<!-- SELL LAND MODAL -->
<div id="sellModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('sellModal')">&times;</span>
    <h2>Sell Land</h2>
    <form id="sellForm">
      <label for="sellParcel">Parcel ID</label>
      <input id="sellParcel" type="text" placeholder="e.g., KE-P1234" required>

      <label for="sellPhone">Phone Number</label>
      <input id="sellPhone" type="tel" placeholder="e.g., 0712345678" required pattern="^07\d{8}$" title="Enter a valid Kenyan phone number (e.g., 0712345678)">

      <label for="landSize">Land Size (in acres)</label>
      <input id="landSize" type="number" step="0.01" placeholder="e.g., 2.5" required>

      <label for="landValue">Value (KES)</label>
      <input id="landValue" type="number" placeholder="e.g., 500000" required>

      <button type="submit">Post for Sale</button>
      <button type="button" onclick="closeSellModal()">Cancel</button>

    </form>
  </div>
</div>



        <button onclick="zoomIn()">Zoom In</button>
        <button onclick="zoomOut()">Zoom Out</button>
        <!-- Admin Login & Support Buttons -->
<div style="position: absolute; bottom: 20px; width: 230px; text-align: center; left: 10px;">
  <button onclick="location.href='LoginAdmin.html'" style="margin-bottom: 10px; padding: 8px 20px; background-color: #0d3867; color: white; border: none; border-radius: 5px;">Login Admin</button>
  <br>
  <button onclick="openSupportModal()" style="padding: 8px 20px; background-color: #064f17; color: white; border: none; border-radius: 5px;">Support</button>
</div>
      </div>
      <div id="map"></div>
    </div>
    
    <script>
      window.addEventListener("load", () => {
        const loader = document.getElementById("loader");
        setTimeout(() => {
          loader.classList.add("hidden");
        }, 2500); // Adjust duration (2.5 seconds)
      });
    </script>
   <script>
  let map;
  const greenIcon = {
    url: "http://maps.google.com/mapfiles/ms/icons/green-dot.png",
  };
  const redIcon = {
    url: "http://maps.google.com/mapfiles/ms/icons/red-dot.png",
  };
  const counties = {
   Nairobi: { lat: -1.286389, lng: 36.817223 },
  Mombasa: { lat: -4.043477, lng: 39.668206 },
  Kisumu: { lat: -0.1022, lng: 34.7617 },
  Nakuru: { lat: -0.3031, lng: 36.0800 },
  Eldoret: { lat: 0.5204, lng: 35.2698 },
  Machakos: { lat: -1.5167, lng: 37.2667 },
  Kiambu: { lat: -1.0333, lng: 36.6500 },
  Nyeri: { lat: -0.4167, lng: 36.9500 },
  Muranga: { lat: -0.7167, lng: 37.1500 },
  Meru: { lat: 0.0500, lng: 37.6500 },
  Embu: { lat: -0.5333, lng: 37.4500 },
  Kitui: { lat: -1.3667, lng: 38.0167 },
  Garissa: { lat: -0.4531, lng: 39.6460 },
  Wajir: { lat: 1.7500, lng: 40.0500 },
  Mandera: { lat: 3.9373, lng: 41.8569 },
  Marsabit: { lat: 2.3285, lng: 37.9899 },
  Isiolo: { lat: 0.3546, lng: 37.5822 },
  Turkana: { lat: 3.1167, lng: 35.5833 },
  WestPokot: { lat: 1.2381, lng: 35.1239 },
  Bungoma: { lat: 0.5685, lng: 34.5584 },
  Busia: { lat: 0.4600, lng: 34.1100 },
  Kakamega: { lat: 0.2833, lng: 34.7500 },
  Vihiga: { lat: 0.0764, lng: 34.7071 },
  Siaya: { lat: 0.1333, lng: 34.2500 },
  HomaBay: { lat: -0.5273, lng: 34.4571 },
  Migori: { lat: -1.0634, lng: 34.4731 },
  Kisii: { lat: -0.6833, lng: 34.7833 },
  Nyamira: { lat: -0.5705, lng: 34.9355 },
  Bomet: { lat: -0.7833, lng: 35.3500 },
  Kericho: { lat: -0.3667, lng: 35.2833 },
  Nandi: { lat: 0.2000, lng: 35.1667 },
  UasinGishu: { lat: 0.4534, lng: 35.3326 },
  ElgeyoMarakwet: { lat: 1.0833, lng: 35.4500 },
  TransNzoia: { lat: 1.0333, lng: 34.9833 },
  Baringo: { lat: 0.4667, lng: 36.1000 },
  Laikipia: { lat: 0.2833, lng: 36.4500 },
  Nakuru: { lat: -0.2833, lng: 36.0667 },
  Narok: { lat: -1.0833, lng: 35.8667 },
  Kajiado: { lat: -1.8500, lng: 36.7833 },
  Kericho: { lat: -0.3676, lng: 35.2836 },
  Bomet: { lat: -0.7813, lng: 35.3413 },
  Kwale: { lat: -4.1833, lng: 39.4500 },
  Kilifi: { lat: -3.6333, lng: 39.8500 },
  TanaRiver: { lat: -1.1667, lng: 40.0000 },
  TaitaTaveta: { lat: -3.3167, lng: 38.4833 },
  Lamu: { lat: -2.2717, lng: 40.9020 },
  Samburu: { lat: 1.0833, lng: 37.0833 },
  TharakaNithi: { lat: -0.3167, lng: 38.0167 }

  };

  const countyCodes = {
    Nairobi: "NAI",
  Mombasa: "MOM",
  Kisumu: "KSM",
  Nakuru: "NAK",
  Eldoret: "ELD",
  Machakos: "MAC",
  Kiambu: "KIA",
  Nyeri: "NYE",
  Muranga: "MUR",
  Meru: "MER",
  Embu: "EMB",
  Kitui: "KIT",
  Garissa: "GAR",
  Wajir: "WAJ",
  Mandera: "MAN",
  Marsabit: "MAR",
  Isiolo: "ISI",
  Turkana: "TUR",
  WestPokot: "WPK",
  Bungoma: "BUN",
  Busia: "BUS",
  Kakamega: "KAK",
  Vihiga: "VIH",
  Siaya: "SIA",
  HomaBay: "HOM",
  Migori: "MIG",
  Kisii: "KIS",
  Nyamira: "NYA",
  Bomet: "BOM",
  Kericho: "KER",
  Nandi: "NAN",
  UasinGishu: "UAS",
  ElgeyoMarakwet: "ELG",
  TransNzoia: "TRA",
  Baringo: "BAR",
  Laikipia: "LAI",
  Narok: "NAR",
  Kajiado: "KAJ",
  Kwale: "KWA",
  Kilifi: "KIL",
  TanaRiver: "TAN",
  TaitaTaveta: "TAI",
  Lamu: "LAM",
  Samburu: "SAM",
  TharakaNithi: "THA"
 
  
  };

  const landsForSale = [];
  const parcelMarkers = {};

  function initMap() {
    map = new google.maps.Map(document.getElementById("map"), {
      center: { lat: 0, lng: 0 },
      zoom: 2,
      mapTypeId: "hybrid",
    });

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (position) => {
          const userLocation = {
            lat: position.coords.latitude,
            lng: position.coords.longitude,
          };
          map.setCenter(userLocation);
          map.setZoom(30);

          new google.maps.Marker({
            position: userLocation,
            map,
            title: "You are here",
            icon: "http://maps.google.com/mapfiles/ms/icons/blue-dot.png",
          });
        },
        () => alert("Location access denied or unavailable.")
      );
    }

    for (const county in counties) {
      const center = counties[county];
      const code = countyCodes[county] || county.substring(0, 3).toUpperCase();

      new google.maps.Marker({
        position: center,
        map,
        icon: redIcon,
        title: `${county.charAt(0).toUpperCase() + county.slice(1)} (County HQ)`,
      });

      for (let i = 0; i < 5; i++) {
        const latOffset = (Math.random() - 0.5) * 0.1;
        const lngOffset = (Math.random() - 0.5) * 0.1;
        const size = `${Math.floor(Math.random() * 3 + 1)} Acre(s)`;
        const price = `Ksh ${Math.floor(Math.random() * 1000000 + 300000)}`;
        const phone = `07${Math.floor(1000000 + Math.random() * 8999999)}`;
        const ref = `${code}${String(i + 11).padStart(3, "0")}`;

        const pos = {
          lat: center.lat + latOffset,
          lng: center.lng + lngOffset,
        };

        const marker = new google.maps.Marker({
          position: pos,
          map,
          icon: greenIcon,
          title: `${size}, ${price}`,
        });

        const info = new google.maps.InfoWindow({
          content: `
            <div>
              <strong>Size:</strong> ${size}<br>
              <strong>Price:</strong> ${price}<br>
              <strong>Seller:</strong> ${phone}<br>
              <strong>Parcel ID:</strong> ${ref}
            </div>
          `,
        });

        marker.addListener("click", () => info.open(map, marker));
        marker.addListener("mouseover", () => info.open(map, marker));
        marker.addListener("mouseout", () => info.close());

        parcelMarkers[ref] = { marker, pos };
      }
    }

    const dropdown = document.getElementById("countyDropdown");
    for (const county in counties) {
      const option = document.createElement("option");
      option.value = county;
      option.textContent = county.charAt(0).toUpperCase() + county.slice(1);
      dropdown.appendChild(option);
    }
  }

  function searchParcel() {
    const input = document.getElementById("parcelInput").value.trim();
    if (!input) return alert("Please enter a Parcel ID.");

    const result = parcelMarkers[input];
    if (!result) return alert("Parcel not found.");

    map.setCenter(result.pos);
    map.setZoom(18);
    google.maps.event.trigger(result.marker, "click");
  }

  function goToCounty() {
    const selected = document.getElementById("countyDropdown").value;
    if (counties[selected]) {
      map.setCenter(counties[selected]);
      map.setZoom(10);
    }
  }

  function zoomIn() {
    map.setZoom(map.getZoom() + 1);
  }

  function zoomOut() {
    map.setZoom(map.getZoom() - 1);
  }
</script>
<script>
 function openSellModal() {
  document.getElementById("sellModal").style.display = "flex";
}
function closeSellModal() {
  document.getElementById("sellModal").style.display = "none";
}
function openBuyModal() {
  document.getElementById("buyModal").style.display = "flex";
}
function closeBuyModal() {
  document.getElementById("buyModal").style.display = "none";
}

</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBK1h-QvnaLDOvRqz9cRDrCShpDAMzae-U&callback=initMap" async defer></script>


    <!-- Replace this API key with your own for production use -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBK1h-QvnaLDOvRqz9cRDrCShpDAMzae-U&callback=initMap"
      async
      defer
    >
        async
        defer
      >
    </script>
   
    <!-- Support Modal -->
<div id="supportModal" style="display: none; position: fixed; z-index: 9999; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.6);">
  <div style="background-color: rgb(240, 244, 241); margin: 15% auto; padding: 20px; border-radius: 8px; width: 300px; text-align: center;">
    <h3>Support</h3>
    <p><strong>Phone:</strong> +254 712 345678</p>
    <p><strong>Email:</strong> <a href="mailto:digitallandownership@gmail.com">digitallandownership@gmail.com</a></p>
    <button onclick="closeSupportModal()" style="margin-top: 10px; padding: 5px 15px;">Close</button>
  </div>
</div>
    <script>
  function openSupportModal() {
    document.getElementById("supportModal").style.display = "block";
  }

  function closeSupportModal() {
    document.getElementById("supportModal").style.display = "none";
  }

  window.onclick = function(event) {
    const modal = document.getElementById("supportModal");
    if (event.target === modal) {
      closeSupportModal();
    }
  }
</script>
  </body>
</html>
